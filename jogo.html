<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Jogo</title>
<style>
body{
  background:#121212;
  color:#fff;
  font-family:Arial;
  text-align:center;
}
#cartas button{
  margin:10px;
  padding:15px;
  font-size:18px;
}
</style>
</head>
<body>

<h2 id="status">Conectando...</h2>
<div id="cartas"></div>

<script>
const status = document.getElementById("status");
const cartasDiv = document.getElementById("cartas");

const ws = new WebSocket("ws://localhost:3000");

ws.onopen = () => {
  status.innerText = "Conectado. Aguardando jogador...";
};

ws.onmessage = (event) => {
  const data = JSON.parse(event.data);

  if (data.type === "WAIT") {
    status.innerText = "Aguardando oponente...";
  }

  if (data.type === "START") {
    status.innerText = data.turno ? "Sua vez" : "Vez do oponente";
    cartasDiv.innerHTML = "";

    data.cartas.forEach(carta => {
      const btn = document.createElement("button");
      btn.innerText = carta;
      btn.onclick = () => {
        ws.send(JSON.stringify({ type: "PLAY", carta }));
        btn.disabled = true;
      };
      cartasDiv.appendChild(btn);
    });
  }

  if (data.type === "YOUR_TURN") {
    status.innerText = "Sua vez";
  }

  if (data.type === "WAIT_TURN") {
    status.innerText = "Aguarde";
  }

  if (data.type === "OPPONENT") {
    alert("Oponente jogou: " + data.carta);
  }
};

ws.onerror = () => {
  status.innerText = "Erro na conex√£o";
};
</script>

</body>
</html>
